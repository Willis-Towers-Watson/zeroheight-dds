var BrightcoveWtwCarousel=(()=>{function t(t){this.root=t,this.myPlayer=videojs(this.root.querySelector(".brightcove-playlist .video-js")),this.appendNavigationElements(),this.activeIndex=0,this.currentShift=0,this.initEventListeners(),this.generateDots(),this.updateCarouselText(this.activeIndex),this.isDragging=!1,this.startX=0,this.initialShift=0,this.wasDragged=!1,this.initDragListeners(),this.myPlayer.on("playlistitem",this.handlePlaylistItem.bind(this)),this.handlePlaylistItem()}return t.prototype.handlePlaylistItem=function(){var t=this.myPlayer.playlist.currentItem(),t=this.myPlayer.playlist()[t],e=this.root.querySelector(".card-title"),i=this.root.querySelector(".card-text");e&&i&&(e.textContent=t.name||"",i.textContent=t.description||"")},t.prototype.appendNavigationElements=function(){var t=this.root.querySelector(".inline-media");t&&t.insertAdjacentHTML("beforeend",'\n                <div class="brightcove-playlist--nav d-flex">\n                    <button class="related-content__carousel-prev slick-prev slick-arrow" aria-label="Previous" type="button">\n                    <i class="material-symbols-outlined">arrow_back</i>\n                    </button>\n                    <div class="related-content__carousel-dots">\n                    <ul></ul>\n                    </div>\n                    <div class="carousel--text">\n                    <span></span>\n                    </div>\n                    <button class="related-content__carousel-next slick-prev slick-arrow" aria-label="Next" type="button">\n                    <i class="material-symbols-outlined">arrow_forward</i>\n                    </button>\n                </div>\n            ')},t.prototype.initEventListeners=function(){var t=this,e=this.root.querySelector(".related-content__carousel-next"),i=this.root.querySelector(".related-content__carousel-prev");e.addEventListener("click",function(){t.moveToNext(),t.playCurrentItem()}),i.addEventListener("click",function(){t.moveToPrev(),t.playCurrentItem()})},t.prototype.handleMouseLeave=function(){this.setTransformShift(-this.activeIndex*this.getItemWidth()),this.updateActiveDot(this.activeIndex)},t.prototype.updateCarouselText=function(t){var e=this.root.querySelectorAll(".vjs-playlist-item").length;this.root.querySelector(".carousel--text span").textContent="".concat(t+1,"/").concat(e)},t.prototype.removeExcessThumbnails=function(){var t=this.root.querySelectorAll(".vjs-playlist-item");if(7<t.length)for(var e=7;e<t.length;e++)t[e].remove()},t.prototype.generateDots=function(){var r=this,t=(this.removeExcessThumbnails(),this.root.querySelectorAll(".vjs-playlist-item")),o=this.root.querySelector(".related-content__carousel-dots ul");o.innerHTML="",t.forEach(function(t,e){var i=document.createElement("li"),s=document.createElement("button");s.setAttribute("type","button"),s.setAttribute("aria-label","Slide ".concat(e+1)),s.addEventListener("click",function(){r.myPlayer.playlist.currentItem(e),r.updateActiveDot(e)}),s.addEventListener("keydown",function(t){"Enter"!==t.key&&" "!==t.key||(r.myPlayer.playlist.currentItem(e),r.updateActiveDot(e),r.myPlayer.play(),t.preventDefault())}),i.appendChild(s),o.appendChild(i),t.addEventListener("click",function(){r.updateActiveDot(e)}),t.addEventListener("touchend",function(){r.updateActiveDot(e)})}),this.updateActiveDot(0)},t.prototype.updateActiveDot=function(i){this.root.querySelectorAll(".related-content__carousel-dots ul li").forEach(function(t,e){e===i?t.classList.add("active"):t.classList.remove("active")}),this.currentShift=-i*this.getItemWidth();var t=this.root.querySelector(".vjs-playlist-item-list"),e=(t&&(e=this.root.querySelectorAll(".vjs-playlist-item").length*this.getItemWidth(),t.style.width="".concat(e,"px"),t.style.transform="translate3d(".concat(this.currentShift,"px, 0px, 0px)")),this.activeIndex=i,this.updateCarouselText(this.activeIndex),this.root.querySelectorAll(".vjs-playlist-item").length),t=this.root.querySelector(".related-content__carousel-prev"),s=this.root.querySelector(".related-content__carousel-next");0===i?t.classList.add("slick-disabled"):t.classList.remove("slick-disabled"),i===e-1?s.classList.add("slick-disabled"):s.classList.remove("slick-disabled")},t.prototype.getItemWidth=function(){return window.innerWidth<=767?184:299},t.prototype.moveToNext=function(){var t=this.root.querySelectorAll(".vjs-playlist-item"),i=-1,e=(t.forEach(function(t,e){t.classList.contains("vjs-selected")&&(i=e)}),(i+1)%t.length);t[i].classList.remove("vjs-selected"),t[e].classList.add("vjs-selected"),this.updateActiveDot(e),this.activeIndex=e,this.updateCarouselText(this.activeIndex)},t.prototype.moveToPrev=function(){var t=this.root.querySelectorAll(".vjs-playlist-item"),i=-1,e=(t.forEach(function(t,e){t.classList.contains("vjs-selected")&&(i=e)}),(i-1+t.length)%t.length);t[i].classList.remove("vjs-selected"),t[e].classList.add("vjs-selected"),this.updateActiveDot(e),this.activeIndex=e,this.updateCarouselText(this.activeIndex)},t.prototype.playCurrentItem=function(){var t=this.root.querySelectorAll(".vjs-playlist-item"),i=-1;t.forEach(function(t,e){t.classList.contains("vjs-selected")&&(i=e)}),this.myPlayer&&this.myPlayer.playlist&&-1!==i&&this.myPlayer.playlist.currentItem(i)},t.prototype.setPlaylistWidth=function(){var t=this.root.querySelectorAll(".vjs-playlist-item").length*this.getItemWidth();this.root.querySelector(".vjs-playlist").style.width="".concat(t,"px")},t.prototype.setTransformShift=function(t){this.minShift=-1*(this.root.querySelectorAll(".vjs-playlist-item").length*this.getItemWidth()-this.root.querySelector(".vjs-playlist").clientWidth),t=Math.min(0,Math.max(this.minShift,t));var e=this.root.querySelector(".vjs-playlist-item-list");this.currentShift=t,e.style.transform="translate3d(".concat(t,"px, 0, 0)")},t.prototype.initDragListeners=function(){var e=this,t=this.root.querySelector(".vjs-playlist");t.addEventListener("mousedown",function(t){return e.dragStart(t)}),t.addEventListener("mousemove",function(t){return e.dragMove(t)}),t.addEventListener("mouseup",function(t){return e.dragEnd(t)}),t.addEventListener("mouseleave",function(t){return e.dragEnd(t)}),t.addEventListener("touchstart",function(t){return e.dragStart(t)}),t.addEventListener("touchmove",function(t){return e.dragMove(t)}),t.addEventListener("touchend",function(t){return e.dragEnd(t)}),t.addEventListener("click",function(t){e.wasDragged&&(t.preventDefault(),t.stopPropagation(),e.wasDragged=!1)})},t.prototype.dragStart=function(t){this.isDragging=!0,this.startX=("touchstart"===t.type?t.touches[0]:t).clientX,this.initialShift=this.currentShift,t.preventDefault(),t.stopPropagation()},t.prototype.dragMove=function(t){this.isDragging&&(this.wasDragged=!0,t=("touchmove"===t.type?t.touches[0]:t).clientX-this.startX,t=this.initialShift+t,this.setTransformShift(t))},t.prototype.dragEnd=function(t){this.wasDragged&&(t.preventDefault(),this.wasDragged=!1),this.isDragging=!1;var e=-Math.round(-this.currentShift/this.getItemWidth())*this.getItemWidth(),i=(this.setTransformShift(e),this.root.querySelector(".vjs-playlist-item-list"));i.style.transition="transform 0.3s",setTimeout(function(){return i.style.transition=""},300),t.target.style.pointerEvents="auto"},t.prototype.refreshDots=function(){this.root.querySelector(".related-content__carousel-dots ul").innerHTML="",this.generateDots()},t})();document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){document.querySelectorAll(".brightcove-playlist").forEach(function(t){new BrightcoveWtwCarousel(t)})},2e3)});